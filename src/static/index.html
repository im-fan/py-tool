<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>脚本工具箱</title>
    <!-- 页面加载前设置主题，避免闪烁 -->
    <script>
        // 从localStorage加载主题，默认亮色模式
        const savedTheme = localStorage.getItem('theme') || 'light';
        document.documentElement.setAttribute('data-theme', savedTheme);
    </script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>脚本工具箱</h1>
            <div class="search-add">
                <div class="search-filters">
                    <div class="search-box">
                        <input type="text" id="search-input" placeholder="按名称搜索应用...">
                        <i class="fas fa-search"></i>
                    </div>
                    <div class="filter-box">
                        <select id="tag-filter">
                            <option value="">全部标签</option>
                        </select>
                    </div>
                </div>
                <button class="btn btn-primary" id="add-app-btn">
                    <i class="fas fa-plus"></i> 新增应用
                </button>
                <button class="btn btn-secondary" id="settings-btn">
                    <i class="fas fa-cog"></i> 设置
                </button>
                <button class="btn btn-secondary" id="theme-toggle">
                    <i class="fas fa-moon"></i>
                    <i class="fas fa-sun"></i>
                </button>
            </div>
        </header>
        
        <div class="cards-container" id="cards-container">
            <!-- 卡片将通过JavaScript动态生成 -->
        </div>
    </div>
    

    
    <!-- 执行应用模态框 -->
    <div class="modal" id="run-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="run-modal-title">执行应用</h2>
                <button class="close-btn" id="close-run-modal">&times;</button>
            </div>
            <div id="run-modal-body">
                <!-- 应用信息将动态生成 -->
            </div>
            <!-- 运营日志和结果输出区域 -->
            <div id="run-results" style="display: none; margin-top: 20px;">
                <div class="form-group">
                    <label for="console-output">控制台输出</label>
                    <div style="height: 200px; overflow-y: auto; border: 1px solid #ddd; border-radius: 4px; padding: 10px; background-color: #2d2d2d; color: #f8f8f2; font-family: 'Courier New', Courier, monospace; font-size: 12px; line-height: 1.4;">
                        <pre id="console-output" style="margin: 0; white-space: pre-wrap; word-wrap: break-word;"></pre>
                    </div>
                </div>
                <div class="form-group">
                    <label for="execution-result">执行结果</label>
                    <div style="height: 100px; overflow-y: auto; border: 1px solid #ddd; border-radius: 4px; padding: 10px; font-family: 'Courier New', Courier, monospace; font-size: 12px; line-height: 1.4;">
                        <pre id="execution-result" style="margin: 0; white-space: pre-wrap; word-wrap: break-word;"></pre>
                    </div>
                </div>
            </div>
            <div class="form-actions">
                <button type="button" class="btn btn-secondary" id="cancel-run-btn">取消</button>
                <button type="button" class="btn btn-primary" id="execute-btn">运行</button>
            </div>
        </div>
    </div>
    
    <!-- 删除确认模态框 -->
    <div class="confirm-modal" id="delete-modal">
        <div class="confirm-content">
            <h3>确认删除</h3>
            <p>您确定要删除这个应用吗？此操作不可恢复。</p>
            <div class="confirm-actions">
                <button class="btn btn-secondary" id="cancel-delete">取消</button>
                <button class="btn btn-danger" id="confirm-delete">删除</button>
            </div>
        </div>
    </div>
    
    <!-- 设置模态框 -->
    <div class="modal" id="settings-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>系统设置</h2>
                <button class="close-btn" id="close-settings-modal">&times;</button>
            </div>
            <form id="settings-form">
                <div class="form-group">
                    <label for="sqlite-path">SQLite数据库路径</label>
                    <input type="text" id="sqlite-path" name="sqlite_path" placeholder="请输入SQLite数据库文件路径">
                    <small class="form-text text-muted">修改数据库路径后，系统将自动迁移数据并重启应用</small>
                </div>
                
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" id="cancel-settings-btn">取消</button>
                    <button type="button" class="btn btn-primary" id="save-settings-btn">保存设置</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- 设置保存确认模态框 -->
    <div class="confirm-modal" id="settings-confirm-modal">
        <div class="confirm-content">
            <h3>确认保存设置</h3>
            <p>保存设置后，系统将自动迁移数据库并重启应用。请确认是否继续？</p>
            <div class="confirm-actions">
                <button class="btn btn-secondary" id="cancel-settings-confirm">取消</button>
                <button class="btn btn-primary" id="confirm-settings-confirm">确认保存</button>
            </div>
        </div>
    </div>
    

    <script src="js/script.js"></script>
</body>
</html>